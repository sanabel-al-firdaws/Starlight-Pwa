---
import type { Props } from "../../node_modules/@astrojs/starlight/props";
import StarlightHead from "../../node_modules/@astrojs/starlight/components/Head.astro";
import { pwaInfo } from "virtual:pwa-info";
---

{pwaInfo && <Fragment set:html={pwaInfo.webManifest.linkTag} />}

<script>
        import { registerSW } from "virtual:pwa-register";
    if ("serviceWorker" in navigator) {
        registerSW({
            immediate: true,
            onRegisteredSW(swScriptUrl) {
                console.log("SW registered: ", swScriptUrl);
            },
            onOfflineReady() {
                console.log("PWA application ready to work offline");
            },
        });
    }
</script>
<script is:inline type="module">
    await import('/pagefind/pagefind-highlight.js');
    new PagefindHighlight({ highlightParam: "highlight" ,addStyles: false ,markOptions:{
		className: "pagefind-highlight",
		exclude: ["[data-pagefind-ignore]", "[data-pagefind-ignore] *"],
		accuracy: { "value": "complementary",
        "limiters": [",","",".",":"]
    },
    acrossElements: true,
    synonyms: {
      "1": "one",
      "2": "two",
    }
	}});
</script>
<StarlightHead {...Astro.props}><slot /></StarlightHead>
